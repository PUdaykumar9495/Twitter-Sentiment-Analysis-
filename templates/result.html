<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sentiment Results</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #007bff, #6610f2);
      color: #333;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 0;
    }
    .dashboard {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      padding: 40px;
      width: 100%;
      max-width: 750px;
      transition: all 0.3s ease;
    }
    .dashboard:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
    }
    .results-title {
      color: #222;
      text-align: center;
      margin-top: 35px;
      margin-bottom: 20px;
    }
    .chart-img {
      display: block;
      margin: 20px auto;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      max-width: 400px;
      width: 100%;
    }
    hr {
      border-top: 2px solid #eee;
      margin-top: 40px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="dashboard mx-auto">
      <h2 class="text-center mb-4">Sentiment Analysis Results</h2>
      <hr>


      <h4 class="results-title">Results for "{{ query | default('N/A') | e }}"</h4>

      <img src="{{ chart_path | default('') }}" class="chart-img" alt="Sentiment Chart">

      {% if result is defined and result.positive is defined and result.wpositive is defined and result.spositive is defined and result.neutral is defined and result.wnegative is defined and result.negative is defined and result.snegative is defined %}
      <div class="mt-4">
        <!-- Positive -->
        <div class="progress mb-3">
          <div class="progress-bar bg-success" style="width: {{ result.positive | default(0) }}%;">
            Positive {{ result.positive | default(0) }}%
          </div>
        </div>
        <!-- Weakly Positive -->
        <div class="progress mb-3">
          <div class="progress-bar bg-success bg-opacity-75" style="width: {{ result.wpositive | default(0) }}%;">
            Weakly Positive {{ result.wpositive | default(0) }}%
          </div>
        </div>
        <!-- Strongly Positive -->
        <div class="progress mb-3">
          <div class="progress-bar bg-success bg-opacity-50" style="width: {{ result.spositive | default(0) }}%;">
            Strongly Positive {{ result.spositive | default(0) }}%
          </div>
        </div>
        <!-- Neutral -->
        <div class="progress mb-3">
          <div class="progress-bar bg-warning text-dark" style="width: {{ result.neutral | default(0) }}%;">
            Neutral {{ result.neutral | default(0) }}%
          </div>
        </div>
        <!-- Weakly Negative -->
        <div class="progress mb-3">
          <div class="progress-bar bg-danger bg-opacity-50" style="width: {{ result.wnegative | default(0) }}%;">
            Weakly Negative {{ result.wnegative | default(0) }}%
          </div>
        </div>
        <!-- Negative -->
        <div class="progress mb-3">
          <div class="progress-bar bg-danger bg-opacity-75" style="width: {{ result.negative | default(0) }}%;">
            Negative {{ result.negative | default(0) }}%
          </div>
        </div>
        <!-- Strongly Negative -->
        <div class="progress mb-3">
          <div class="progress-bar bg-danger" style="width: {{ result.snegative | default(0) }}%;">
            Strongly Negative {{ result.snegative | default(0) }}%
          </div>
        </div>
      </div>
      <!-- Overall Polarity -->
      <div class="text-center mt-4">
        <h5>Overall Polarity:
          {% if result.polarity is defined %}
            <span class="
              {% if result.polarity > 0 %}text-success
              {% elif result.polarity < 0 %}text-danger
              {% else %}text-secondary
              {% endif %}
            ">
              {{ result.polarity }}
            </span>
          {% else %}
            <span class="text-secondary">N/A</span>
          {% endif %}
        </h5>
      </div>
      {% else %}
        <div class="alert alert-warning mt-4 text-center">
          No sentiment data available for this query. Please try a different topic or check your API credentials.
        </div>
      {% endif %}

      <div class="text-center mt-4">
        <a href="/input" class="btn btn-primary">Analyze Another Topic</a>
      </div>

    </div>
  </div>
</body>
</html>
